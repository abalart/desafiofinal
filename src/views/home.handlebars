<div class="products-container">
    <h1> Ecommerce "Mercado Liebre!"</h1>
    <h2> Seleccione su producto a agregar al carrito de compra:</h2>
    <div class="message">
       
    </div>
    
</div>
<table id="productsTable" class="table-cart">
    <thead>
        <tr>
            <th><strong>Product</strong></th>
            <th><strong>thumbnail</strong></th>
            <th><strong>Description</strong></th>
            <th><strong>Price</strong></th>
            <th><strong>Stock</strong></th>
            <th><strong>Category</strong></th>
        </tr>
    </thead>
    <tbody>
        {{#each data.docs}}
        <tr>
            <td>{{title}}</td>
            <td>
                {{#each thumbnails}}
                <img src="{{this}}" alt="">
                {{/each}}
            </td>
            <td>{{description}}</td>
            <td>{{price}}</td>
            <td>{{stock}}</td>
            <td>{{category}}</td>
            <td>
                <form class="send-cart" action="/api/carts/{{../user.cart}}/products/{{_id}}" method="post">
                    <input class="botons" type="submit">
                </form>
            </td>
        </tr>
        {{/each}}
    </tbody>
</table>
</div>

<script>
    document.getElementById("searchform").addEventListener('submit', function (event) {
        const filter = document.getElementById("filter").value;

        fetch(event.target.action, {
            method: "GET",
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ filter: filter })
        }).then(response => {
            // Maneja la respuesta de la solicitud
            if (response.ok) {
                // Realiza acciones adicionales si la eliminación fue exitosa
                console.log('Eliminación exitosa');
            } else {
                console.error('Error al eliminar');
            }
        })
            .catch(error => {
                console.error('Error en la solicitud:', error);
            });
    })
</script>

<link rel="stylesheet" href="/css/{{style}}">